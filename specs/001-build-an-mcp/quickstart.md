# Quickstart: Pub.dev Package Intelligence MCP

## Prerequisites

- .NET 9 SDK (9.0.0-preview or later with C# 13 features enabled)
- PowerShell 7+ or Windows PowerShell 5.1 for scripts
- Access to pub.dev REST API endpoints over HTTPS
- Optional: Docker for container packaging

## First-Time Setup

1. Clone the repository and checkout the `001-build-an-mcp` branch.
2. Restore tools:
   ```powershell
   dotnet tool restore
   ```
3. Install required workspaces analyzers (once per machine):
   ```powershell
   dotnet restore
   ```
4. Configure environment variables (development defaults):
   - `PUBDEV_BASE_URL=https://pub.dev`
   - `MCP_LOG_LEVEL=Information`
   - `MCP_TELEMETRY_EXPORTER=console`

## Running the MCP Server Locally

```powershell
dotnet run --project src/PubDevMcp.Server/PubDevMcp.Server.csproj -- --stdio
```

- The server listens on stdio for local assistants.
- Use the MCP client of choice (e.g., VS Code or CLI) to connect.

## Exercising Core Tools

1. **Search packages**

   ```powershell
   dotnet test tests/contract/PubDevMcp.Contracts.Tests.csproj --filter "SearchPackages"
   ```

   Expects 10 results and a follow-up hint when more packages are available.

2. **Check compatibility**

   ```powershell
   dotnet test tests/integration/PubDevMcp.Integration.Tests.csproj --filter "Compatibility_ResolvesLatest"
   ```

   Validates constraint evaluation for a sample Flutter SDK version.

3. **Inspect dependency tree**
   ```powershell
   dotnet test tests/integration/PubDevMcp.Integration.Tests.csproj --filter "DependencyInspector_FlutterSdk"
   ```
   Ensures recursion depth limits and conflict reporting.

## Observability & Diagnostics

- Structured logs are emitted to console and `logs/` via Serilog JSON sink.
- OpenTelemetry exporter publishes traces to console; configure `OTEL_EXPORTER_OTLP_ENDPOINT` for remote collectors.
- Health endpoints exposed under `GET /health/live` and `GET /health/ready` when running in HTTP mode.

## Cleanup

```powershell
dotnet clean
dotnet nuget locals all --clear
```

## Next Steps

- Follow `tasks.md` (generated by `/tasks`) for implementation order.
- After implementation, rerun all contract + integration tests and verify response times stay within NFR-001 bounds using BenchmarkDotNet harness in `tests/performance`.
